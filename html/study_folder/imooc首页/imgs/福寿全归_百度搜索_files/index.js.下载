!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).clickstream=t()}(this,(function(){"use strict";var e=function(e){return"object"==typeof e?null!==e:"function"==typeof e},t=function(t){if(!e(t))throw TypeError(t+" is not an object!");return t},n=function(e){try{return!!e()}catch(e){return!0}},r=!n((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}));function i(e,t){return e(t={exports:{}},t.exports),t.exports}var o=i((function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)})),a=o.document,u=e(a)&&e(a.createElement),c=function(e){return u?a.createElement(e):{}},l=!r&&!n((function(){return 7!=Object.defineProperty(c("div"),"a",{get:function(){return 7}}).a})),s=function(t,n){if(!e(t))return t;var r,i;if(n&&"function"==typeof(r=t.toString)&&!e(i=r.call(t)))return i;if("function"==typeof(r=t.valueOf)&&!e(i=r.call(t)))return i;if(!n&&"function"==typeof(r=t.toString)&&!e(i=r.call(t)))return i;throw TypeError("Can't convert object to primitive value")},f=Object.defineProperty,p={f:r?Object.defineProperty:function(e,n,r){if(t(e),n=s(n,!0),t(r),l)try{return f(e,n,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[n]=r.value),e}},d=p.f,h=Function.prototype,g=/^\s*function ([^ (]*)/,v="name";v in h||r&&d(h,v,{configurable:!0,get:function(){try{return(""+this).match(g)[1]}catch(e){return""}}});var m=i((function(e){var t=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=t)})),y=(m.version,function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}),b=r?function(e,t,n){return p.f(e,t,y(1,n))}:function(e,t,n){return e[t]=n,e},w={}.hasOwnProperty,_=function(e,t){return w.call(e,t)},x=0,k=Math.random(),S=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++x+k).toString(36))},E=i((function(e){var t="__core-js_shared__",n=o[t]||(o[t]={});(e.exports=function(e,t){return n[e]||(n[e]=void 0!==t?t:{})})("versions",[]).push({version:m.version,mode:"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})})),P=E("native-function-to-string",Function.toString),I=i((function(e){var t=S("src"),n="toString",r=(""+P).split(n);m.inspectSource=function(e){return P.call(e)},(e.exports=function(e,n,i,a){var u="function"==typeof i;u&&(_(i,"name")||b(i,"name",n)),e[n]!==i&&(u&&(_(i,t)||b(i,t,e[n]?""+e[n]:r.join(String(n)))),e===o?e[n]=i:a?e[n]?e[n]=i:b(e,n,i):(delete e[n],b(e,n,i)))})(Function.prototype,n,(function(){return"function"==typeof this&&this[t]||P.call(this)}))})),C=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e},A=function(e,t,n){if(C(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}},D=function(e,t,n){var r,i,a,u,c=e&D.F,l=e&D.G,s=e&D.S,f=e&D.P,p=e&D.B,d=l?o:s?o[t]||(o[t]={}):(o[t]||{}).prototype,h=l?m:m[t]||(m[t]={}),g=h.prototype||(h.prototype={});for(r in l&&(n=t),n)a=((i=!c&&d&&void 0!==d[r])?d:n)[r],u=p&&i?A(a,o):f&&"function"==typeof a?A(Function.call,a):a,d&&I(d,r,a,e&D.U),h[r]!=a&&b(h,r,u),f&&g[r]!=a&&(g[r]=a)};o.core=m,D.F=1,D.G=2,D.S=4,D.P=8,D.B=16,D.W=32,D.U=64,D.R=128;var T=D,O={}.toString,N=function(e){return O.call(e).slice(8,-1)},L=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==N(e)?e.split(""):Object(e)},j=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e},R=function(e){return Object(j(e))},M=Math.ceil,W=Math.floor,q=function(e){return isNaN(e=+e)?0:(e>0?W:M)(e)},F=Math.min,B=function(e){return e>0?F(q(e),9007199254740991):0},G=Array.isArray||function(e){return"Array"==N(e)},$=i((function(e){var t=E("wks"),n=o.Symbol,r="function"==typeof n;(e.exports=function(e){return t[e]||(t[e]=r&&n[e]||(r?n:S)("Symbol."+e))}).store=t})),H=$("species"),z=function(t,n){return new(function(t){var n;return G(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!G(n.prototype)||(n=void 0),e(n)&&null===(n=n[H])&&(n=void 0)),void 0===n?Array:n}(t))(n)},V=function(e,t){var n=1==e,r=2==e,i=3==e,o=4==e,a=6==e,u=5==e||a,c=t||z;return function(t,l,s){for(var f,p,d=R(t),h=L(d),g=A(l,s,3),v=B(h.length),m=0,y=n?c(t,v):r?c(t,0):void 0;v>m;m++)if((u||m in h)&&(p=g(f=h[m],m,d),e))if(n)y[m]=p;else if(p)switch(e){case 3:return!0;case 5:return f;case 6:return m;case 2:y.push(f)}else if(o)return!1;return a?-1:i||o?o:y}},U=function(e,t){return!!e&&n((function(){t?e.call(null,(function(){}),1):e.call(null)}))},J=V(0),K=U([].forEach,!0);function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z(e,t,n){return t&&Y(e.prototype,t),n&&Y(e,n),e}function ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach((function(t){ee(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}T(T.P+T.F*!K,"Array",{forEach:function(e){return J(this,e,arguments[1])}});var re,ie,oe,ae=$("toStringTag"),ue="Arguments"==N(function(){return arguments}()),ce=function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),ae))?n:ue?N(t):"Object"==(r=N(t))&&"function"==typeof t.callee?"Arguments":r},le=function(e,n,r,i){try{return i?n(t(r)[0],r[1]):n(r)}catch(n){var o=e.return;throw void 0!==o&&t(o.call(e)),n}},se={},fe=$("iterator"),pe=Array.prototype,de=function(e){return void 0!==e&&(se.Array===e||pe[fe]===e)},he=$("iterator"),ge=m.getIteratorMethod=function(e){if(null!=e)return e[he]||e["@@iterator"]||se[ce(e)]},ve=i((function(e){var n={},r={},i=e.exports=function(e,i,o,a,u){var c,l,s,f,p=u?function(){return e}:ge(e),d=A(o,a,i?2:1),h=0;if("function"!=typeof p)throw TypeError(e+" is not iterable!");if(de(p)){for(c=B(e.length);c>h;h++)if((f=i?d(t(l=e[h])[0],l[1]):d(e[h]))===n||f===r)return f}else for(s=p.call(e);!(l=s.next()).done;)if((f=le(s,d,l.value,i))===n||f===r)return f};i.BREAK=n,i.RETURN=r})),me=$("species"),ye=function(e,n){var r,i=t(e).constructor;return void 0===i||null==(r=t(i)[me])?n:C(r)},be=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)},we=o.document,_e=we&&we.documentElement,xe=o.process,ke=o.setImmediate,Se=o.clearImmediate,Ee=o.MessageChannel,Pe=o.Dispatch,Ie=0,Ce={},Ae="onreadystatechange",De=function(){var e=+this;if(Ce.hasOwnProperty(e)){var t=Ce[e];delete Ce[e],t()}},Te=function(e){De.call(e.data)};ke&&Se||(ke=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return Ce[++Ie]=function(){be("function"==typeof e?e:Function(e),t)},re(Ie),Ie},Se=function(e){delete Ce[e]},"process"==N(xe)?re=function(e){xe.nextTick(A(De,e,1))}:Pe&&Pe.now?re=function(e){Pe.now(A(De,e,1))}:Ee?(oe=(ie=new Ee).port2,ie.port1.onmessage=Te,re=A(oe.postMessage,oe,1)):o.addEventListener&&"function"==typeof postMessage&&!o.importScripts?(re=function(e){o.postMessage(e+"","*")},o.addEventListener("message",Te,!1)):re=Ae in c("script")?function(e){_e.appendChild(c("script")).onreadystatechange=function(){_e.removeChild(this),De.call(e)}}:function(e){setTimeout(A(De,e,1),0)});var Oe={set:ke,clear:Se},Ne=Oe.set,Le=o.MutationObserver||o.WebKitMutationObserver,je=o.process,Re=o.Promise,Me="process"==N(je);function We(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=C(t),this.reject=C(n)}var qe={f:function(e){return new We(e)}},Fe=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}},Be=o.navigator,Ge=Be&&Be.userAgent||"",$e=p.f,He=$("toStringTag"),ze=function(e,t,n){e&&!_(e=n?e:e.prototype,He)&&$e(e,He,{configurable:!0,value:t})},Ve=$("species"),Ue=function(e){var t=o[e];r&&t&&!t[Ve]&&p.f(t,Ve,{configurable:!0,get:function(){return this}})},Je=$("iterator"),Ke=!1;try{var Xe=[7][Je]();Xe.return=function(){Ke=!0},Array.from(Xe,(function(){throw 2}))}catch(e){}var Qe,Ye,Ze,et,tt=Oe.set,nt=function(){var e,t,n,r=function(){var r,i;for(Me&&(r=je.domain)&&r.exit();e;){i=e.fn,e=e.next;try{i()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(Me)n=function(){je.nextTick(r)};else if(!Le||o.navigator&&o.navigator.standalone)if(Re&&Re.resolve){var i=Re.resolve(void 0);n=function(){i.then(r)}}else n=function(){Ne.call(o,r)};else{var a=!0,u=document.createTextNode("");new Le(r).observe(u,{characterData:!0}),n=function(){u.data=a=!a}}return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}(),rt="Promise",it=o.TypeError,ot=o.process,at=ot&&ot.versions,ut=at&&at.v8||"",ct=o.Promise,lt="process"==ce(ot),st=function(){},ft=Ye=qe.f,pt=!!function(){try{var e=ct.resolve(1),t=(e.constructor={})[$("species")]=function(e){e(st,st)};return(lt||"function"==typeof PromiseRejectionEvent)&&e.then(st)instanceof t&&0!==ut.indexOf("6.6")&&-1===Ge.indexOf("Chrome/66")}catch(e){}}(),dt=function(t){var n;return!(!e(t)||"function"!=typeof(n=t.then))&&n},ht=function(e,t){if(!e._n){e._n=!0;var n=e._c;nt((function(){for(var r=e._v,i=1==e._s,o=0,a=function(t){var n,o,a,u=i?t.ok:t.fail,c=t.resolve,l=t.reject,s=t.domain;try{u?(i||(2==e._h&&mt(e),e._h=1),!0===u?n=r:(s&&s.enter(),n=u(r),s&&(s.exit(),a=!0)),n===t.promise?l(it("Promise-chain cycle")):(o=dt(n))?o.call(n,c,l):c(n)):l(r)}catch(e){s&&!a&&s.exit(),l(e)}};n.length>o;)a(n[o++]);e._c=[],e._n=!1,t&&!e._h&&gt(e)}))}},gt=function(e){tt.call(o,(function(){var t,n,r,i=e._v,a=vt(e);if(a&&(t=Fe((function(){lt?ot.emit("unhandledRejection",i,e):(n=o.onunhandledrejection)?n({promise:e,reason:i}):(r=o.console)&&r.error&&r.error("Unhandled promise rejection",i)})),e._h=lt||vt(e)?2:1),e._a=void 0,a&&t.e)throw t.v}))},vt=function(e){return 1!==e._h&&0===(e._a||e._c).length},mt=function(e){tt.call(o,(function(){var t;lt?ot.emit("rejectionHandled",e):(t=o.onrejectionhandled)&&t({promise:e,reason:e._v})}))},yt=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),ht(t,!0))},bt=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw it("Promise can't be resolved itself");(t=dt(e))?nt((function(){var r={_w:n,_d:!1};try{t.call(e,A(bt,r,1),A(yt,r,1))}catch(e){yt.call(r,e)}})):(n._v=e,n._s=1,ht(n,!1))}catch(e){yt.call({_w:n,_d:!1},e)}}};pt||(ct=function(e){!function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!")}(this,ct,rt,"_h"),C(e),Qe.call(this);try{e(A(bt,this,1),A(yt,this,1))}catch(e){yt.call(this,e)}},(Qe=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=function(e,t,n){for(var r in t)I(e,r,t[r],n);return e}(ct.prototype,{then:function(e,t){var n=ft(ye(this,ct));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=lt?ot.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&ht(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),Ze=function(){var e=new Qe;this.promise=e,this.resolve=A(bt,e,1),this.reject=A(yt,e,1)},qe.f=ft=function(e){return e===ct||e===et?new Ze(e):Ye(e)}),T(T.G+T.W+T.F*!pt,{Promise:ct}),ze(ct,rt),Ue(rt),et=m.Promise,T(T.S+T.F*!pt,rt,{reject:function(e){var t=ft(this);return(0,t.reject)(e),t.promise}}),T(T.S+T.F*!pt,rt,{resolve:function(n){return function(n,r){if(t(n),e(r)&&r.constructor===n)return r;var i=qe.f(n);return(0,i.resolve)(r),i.promise}(this,n)}}),T(T.S+T.F*!(pt&&function(e,t){if(!t&&!Ke)return!1;var n=!1;try{var r=[7],i=r[Je]();i.next=function(){return{done:n=!0}},r[Je]=function(){return i},e(r)}catch(e){}return n}((function(e){ct.all(e).catch(st)}))),rt,{all:function(e){var t=this,n=ft(t),r=n.resolve,i=n.reject,o=Fe((function(){var n=[],o=0,a=1;ve(e,!1,(function(e){var u=o++,c=!1;n.push(void 0),a++,t.resolve(e).then((function(e){c||(c=!0,n[u]=e,--a||r(n))}),i)})),--a||r(n)}));return o.e&&i(o.v),n.promise},race:function(e){var t=this,n=ft(t),r=n.reject,i=Fe((function(){ve(e,!1,(function(e){t.resolve(e).then(n.resolve,r)}))}));return i.e&&r(i.v),n.promise}});var wt={};wt[$("toStringTag")]="z",wt+""!="[object z]"&&I(Object.prototype,"toString",(function(){return"[object "+ce(this)+"]"}),!0),T(T.S,"Array",{isArray:G});var _t=function(e){return L(j(e))},xt=Math.max,kt=Math.min,St=function(e){return function(t,n,r){var i,o=_t(t),a=B(o.length),u=function(e,t){return(e=q(e))<0?xt(e+t,0):kt(e,t)}(r,a);if(e&&n!=n){for(;a>u;)if((i=o[u++])!=i)return!0}else for(;a>u;u++)if((e||u in o)&&o[u]===n)return e||u||0;return!e&&-1}},Et=St(!1),Pt=[].indexOf,It=!!Pt&&1/[1].indexOf(1,-0)<0;T(T.P+T.F*(It||!U(Pt)),"Array",{indexOf:function(e){return It?Pt.apply(this,arguments)||0:Et(this,e,arguments[1])}});var Ct=[].slice,At={},Dt=function(e,t,n){if(!(t in At)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";At[t]=Function("F,a","return new F("+r.join(",")+")")}return At[t](e,n)},Tt=Function.bind||function(t){var n=C(this),r=Ct.call(arguments,1),i=function(){var e=r.concat(Ct.call(arguments));return this instanceof i?Dt(n,e.length,e):be(n,e,t)};return e(n.prototype)&&(i.prototype=n.prototype),i};T(T.P,"Function",{bind:Tt});var Ot=function(){function e(t){Q(this,e),this.maxReconnect=3,this.curReconnect=0,this.openData={},this.config=t.websocket,this.ws=null,this.lockReconnect=!1,this.reTimeId,this.openCallback=null,this.closeCallback=null,this.resolveAuto=null,this.heartCheck={timeout:this.config.heartInterval,timeoutId:null,serverTimeoutId:null,current:this,start:function(){var e=this;this.timeoutId&&clearTimeout(this.timeoutId),this.serverTimeoutId&&clearTimeout(this.serverTimeoutId),this.timeoutId=setTimeout((function(){1===e.current.ws.readyState&&e.current.ws.send("heartCheck"),e.serverTimeoutId=setTimeout((function(){e.current.ws.close()}),e.timeout)}),this.timeout)}}}return Z(e,[{key:"reconnect",value:function(){var e=this;this.lockReconnect||this.curReconnect>=this.maxReconnect||(this.curReconnect++,this.closeCallback&&this.closeCallback(),this.lockReconnect=!0,this.reTimeId&&clearTimeout(this.reTimeId),this.reTimeId=setTimeout((function(){e.initWebsocket(e.openData),e.lockReconnect=!1}),this.config.reconnectInterval))}},{key:"initWebsocket",value:function(e,t,n,r,i){var o=this;this.openData=e,t&&(this.openCallback=t),n&&(this.closeCallback=n),r&&(this.resolveAuto=r);var a=this.config.url;this.ws=new WebSocket(a),this.ws.onerror=function(){o.closeCallback(),i&&console.warn("websocket服务出错了"),o.reconnect()},this.ws.onclose=function(){o.closeCallback(),i&&console.warn("websocket服务关闭了"),o.reconnect()},this.ws.onopen=function(){o.openCallback(),o.logWsConfig(e,i),o.heartCheck.start()},this.ws.onmessage=function(e){o.heartCheck.start();var t=e.data&&JSON.parse(e.data).data;t&&t.length>0&&o.resolveAuto(t)}}},{key:"logWebsocket",value:function(e,t){this.ws&&1===this.ws.readyState?this.ws.send(e):t&&console.warn("ws未连接，无法发送数据")}},{key:"logWsConfig",value:function(e,t){this.logWebsocket(e,t)}}]),e}();function Nt(e){if((e=e||{}).url){var t="jsonp_"+Math.ceil(1e4*Math.random()),n=document.getElementsByTagName("head")[0];e.data.callback=t;var r=function(e){var t=[];for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}(e.data),i=document.createElement("script"),o=null;n.appendChild(i),window[t]=function(n){o&&clearTimeout(o),window[t]=null,e.success&&e.success(n)},i.src=e.url+"?"+r,e.time&&(o=setTimeout((function(){window[t]=null,n.removeChild(i),e.error&&e.error({message:"超时"})}),e.time))}else console.warn("jsonp参数不合法")}function Lt(e,t,n){e.getconfig?Nt({url:"https://cstm.baidu.com/log/getconf",data:e,success:function(e){n&&n(e.data||[])},error:function(e){console.log("获取自动打点流配置失败",e)}}):function(e){var t=window.page||{},n="httplog_"+(new Date).getTime(),r=t[n]=new Image;r.onload=r.onerror=function(){t[n]=null},r.src=e,r=null}(t+"?params="+encodeURIComponent(e))}var jt=$("unscopables"),Rt=Array.prototype;null==Rt[jt]&&b(Rt,jt,{});var Mt=function(e){Rt[jt][e]=!0},Wt=function(e,t){return{value:t,done:!!e}},qt=E("keys"),Ft=function(e){return qt[e]||(qt[e]=S(e))},Bt=St(!1),Gt=Ft("IE_PROTO"),$t=function(e,t){var n,r=_t(e),i=0,o=[];for(n in r)n!=Gt&&_(r,n)&&o.push(n);for(;t.length>i;)_(r,n=t[i++])&&(~Bt(o,n)||o.push(n));return o},Ht="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),zt=Object.keys||function(e){return $t(e,Ht)},Vt=r?Object.defineProperties:function(e,n){t(e);for(var r,i=zt(n),o=i.length,a=0;o>a;)p.f(e,r=i[a++],n[r]);return e},Ut=Ft("IE_PROTO"),Jt=function(){},Kt=function(){var e,t=c("iframe"),n=Ht.length;for(t.style.display="none",_e.appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),Kt=e.F;n--;)delete Kt.prototype[Ht[n]];return Kt()},Xt=Object.create||function(e,n){var r;return null!==e?(Jt.prototype=t(e),r=new Jt,Jt.prototype=null,r[Ut]=e):r=Kt(),void 0===n?r:Vt(r,n)},Qt={};b(Qt,$("iterator"),(function(){return this}));var Yt=function(e,t,n){e.prototype=Xt(Qt,{next:y(1,n)}),ze(e,t+" Iterator")},Zt=Ft("IE_PROTO"),en=Object.prototype,tn=Object.getPrototypeOf||function(e){return e=R(e),_(e,Zt)?e[Zt]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?en:null},nn=$("iterator"),rn=!([].keys&&"next"in[].keys()),on="keys",an="values",un=function(){return this},cn=function(e,t,n,r,i,o,a){Yt(n,t,r);var u,c,l,s=function(e){if(!rn&&e in h)return h[e];switch(e){case on:case an:return function(){return new n(this,e)}}return function(){return new n(this,e)}},f=t+" Iterator",p=i==an,d=!1,h=e.prototype,g=h[nn]||h["@@iterator"]||i&&h[i],v=g||s(i),m=i?p?s("entries"):v:void 0,y="Array"==t&&h.entries||g;if(y&&(l=tn(y.call(new e)))!==Object.prototype&&l.next&&(ze(l,f,!0),"function"!=typeof l[nn]&&b(l,nn,un)),p&&g&&g.name!==an&&(d=!0,v=function(){return g.call(this)}),(rn||d||!h[nn])&&b(h,nn,v),se[t]=v,se[f]=un,i)if(u={values:p?v:s(an),keys:o?v:s(on),entries:m},a)for(c in u)c in h||I(h,c,u[c]);else T(T.P+T.F*(rn||d),t,u);return u}(Array,"Array",(function(e,t){this._t=_t(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,Wt(1)):Wt(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values");se.Arguments=se.Array,Mt("keys"),Mt("values"),Mt("entries");for(var ln=$("iterator"),sn=$("toStringTag"),fn=se.Array,pn={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},dn=zt(pn),hn=0;hn<dn.length;hn++){var gn,vn=dn[hn],mn=pn[vn],yn=o[vn],bn=yn&&yn.prototype;if(bn&&(bn[ln]||b(bn,ln,fn),bn[sn]||b(bn,sn,vn),se[vn]=fn,mn))for(gn in cn)bn[gn]||I(bn,gn,cn[gn],!0)}function wn(e){var t;if("string"==typeof e||"number"==typeof e||"boolean"==typeof e||"function"==typeof e||void 0===e||null==e)t=e;else if(Array.isArray(e)){t=[];for(var n=0;n<e.length;n++)t[n]=wn(e[n])}else if("object"===X(e))for(var r in t={},e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=wn(e[r]));else t=e;return t}var _n=function(){var e=t(this),n="";return e.global&&(n+="g"),e.ignoreCase&&(n+="i"),e.multiline&&(n+="m"),e.unicode&&(n+="u"),e.sticky&&(n+="y"),n};r&&"g"!=/./g.flags&&p.f(RegExp.prototype,"flags",{configurable:!0,get:_n});var xn="toString",kn=/./.toString,Sn=function(e){I(RegExp.prototype,xn,e,!0)};n((function(){return"/a/b"!=kn.call({source:"a",flags:"b"})}))?Sn((function(){var e=t(this);return"/".concat(e.source,"/","flags"in e?e.flags:!r&&e instanceof RegExp?_n.call(e):void 0)})):kn.name!=xn&&Sn((function(){return kn.call(this)}));var En=Date.prototype,Pn="Invalid Date",In="toString",Cn=En.toString,An=En.getTime;function Dn(e){return"[object Object]"===Object.prototype.toString.call(e)}function Tn(e){for(var t in e)Array.isArray(e[t])||Dn(e[t])?e[t]=Tn(e[t]):e[t]=String(e[t]);return JSON.stringify(e)}new Date(NaN)+""!=Pn&&I(En,In,(function(){var e=An.call(this);return e==e?Cn.call(this):Pn}));var On=["appname","timestamp","sv","av","channel","fr","trace","sample","page_id"],Nn=function(){function e(){Q(this,e),this.baseParam={sv:"v1.0.1",av:"1.0.0"}}return Z(e,[{key:"getBaseParam",value:function(){return this.baseParam}},{key:"setBaseParam",value:function(e,t){if(Dn(e))for(var n in e)On.indexOf(n)>-1&&(this.baseParam[n]=e[n]);else t&&console.warn("设置基础字段参数不是object")}}]),e}(),Ln=$("match"),jn=function(t){var n;return e(t)&&(void 0!==(n=t[Ln])?!!n:"RegExp"==N(t))},Rn=function(e){return function(t,n){var r,i,o=String(j(t)),a=q(n),u=o.length;return a<0||a>=u?e?"":void 0:(r=o.charCodeAt(a))<55296||r>56319||a+1===u||(i=o.charCodeAt(a+1))<56320||i>57343?e?o.charAt(a):r:e?o.slice(a,a+2):i-56320+(r-55296<<10)+65536}}(!0),Mn=function(e,t,n){return t+(n?Rn(e,t).length:1)},Wn=RegExp.prototype.exec,qn=function(e,t){var n=e.exec;if("function"==typeof n){var r=n.call(e,t);if("object"!=typeof r)throw new TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==ce(e))throw new TypeError("RegExp#exec called on incompatible receiver");return Wn.call(e,t)},Fn=RegExp.prototype.exec,Bn=String.prototype.replace,Gn=Fn,$n=function(){var e=/a/,t=/b*/g;return Fn.call(e,"a"),Fn.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),Hn=void 0!==/()??/.exec("")[1];($n||Hn)&&(Gn=function(e){var t,n,r,i,o=this;return Hn&&(n=new RegExp("^"+o.source+"$(?!\\s)",_n.call(o))),$n&&(t=o.lastIndex),r=Fn.call(o,e),$n&&r&&(o.lastIndex=o.global?r.index+r[0].length:t),Hn&&r&&r.length>1&&Bn.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r});var zn=Gn;T({target:"RegExp",proto:!0,forced:zn!==/./.exec},{exec:zn});var Vn=$("species"),Un=!n((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),Jn=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}(),Kn=function(e,t,r){var i=$(e),o=!n((function(){var t={};return t[i]=function(){return 7},7!=""[e](t)})),a=o?!n((function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[Vn]=function(){return n}),n[i](""),!t})):void 0;if(!o||!a||"replace"===e&&!Un||"split"===e&&!Jn){var u=/./[i],c=r(j,i,""[e],(function(e,t,n,r,i){return t.exec===zn?o&&!i?{done:!0,value:u.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}})),l=c[0],s=c[1];I(String.prototype,e,l),b(RegExp.prototype,i,2==t?function(e,t){return s.call(e,this,t)}:function(e){return s.call(e,this)})}},Xn=Math.min,Qn=[].push,Yn=4294967295,Zn=!n((function(){RegExp(Yn,"y")}));Kn("split",2,(function(e,n,r,i){var o;return o="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,t){var n=String(this);if(void 0===e&&0===t)return[];if(!jn(e))return r.call(n,e,t);for(var i,o,a,u=[],c=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),l=0,s=void 0===t?Yn:t>>>0,f=new RegExp(e.source,c+"g");(i=zn.call(f,n))&&!((o=f.lastIndex)>l&&(u.push(n.slice(l,i.index)),i.length>1&&i.index<n.length&&Qn.apply(u,i.slice(1)),a=i[0].length,l=o,u.length>=s));)f.lastIndex===i.index&&f.lastIndex++;return l===n.length?!a&&f.test("")||u.push(""):u.push(n.slice(l)),u.length>s?u.slice(0,s):u}:"0".split(void 0,0).length?function(e,t){return void 0===e&&0===t?[]:r.call(this,e,t)}:r,[function(t,r){var i=e(this),a=null==t?void 0:t[n];return void 0!==a?a.call(t,i,r):o.call(String(i),t,r)},function(e,n){var a=i(o,e,this,n,o!==r);if(a.done)return a.value;var u=t(e),c=String(this),l=ye(u,RegExp),s=u.unicode,f=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(Zn?"y":"g"),p=new l(Zn?u:"^(?:"+u.source+")",f),d=void 0===n?Yn:n>>>0;if(0===d)return[];if(0===c.length)return null===qn(p,c)?[c]:[];for(var h=0,g=0,v=[];g<c.length;){p.lastIndex=Zn?g:0;var m,y=qn(p,Zn?c:c.slice(g));if(null===y||(m=Xn(B(p.lastIndex+(Zn?0:g)),c.length))===h)g=Mn(c,g,s);else{if(v.push(c.slice(h,g)),v.length===d)return v;for(var b=1;b<=y.length-1;b++)if(v.push(y[b]),v.length===d)return v;g=h=m}}return v.push(c.slice(h)),v}]}));var er=["web","xcx"],tr={web:["url","referer","ua","baiduid","device","sid","cuid","uk","network"],xcx:["device","swan_id","app_version","app_key","scene","baiduid","session_id","cuid","uk","sid","network","os_version","host_app","host_version","sdk_version","url","referer","screen","device_mfr","device_md"]},nr=function(){function e(){Q(this,e),this.platform="",this.platParam={}}return Z(e,[{key:"setInitPlatParam",value:function(e){var t=this;"web"===this.platform&&(this.platParam.url=window.location.href,this.platParam.referer=document.referrer,this.platParam.ua=navigator.userAgent,document.cookie&&document.cookie.split("; ").forEach((function(n){var r=n.split("=");"BAIDUID"===r[0]?t.platParam.baiduid=r[1]:"pc"===e&&"H_PS_PSSID"===r[0]||"h5"===e&&"H_WISE_SIDS"===r[0]?t.platParam.sid=r[1]:"BAIDUCUID"===r[0]&&(t.platParam.cuid=r[1])})))}},{key:"getPlatform",value:function(){return this.platform}},{key:"setPlatform",value:function(e,t){er.indexOf(e)>-1?this.platform=e:t&&console.warn("设置平台的值错误，仅支持web和xcx。当前是"+e)}},{key:"getPlatParam",value:function(){return this.platParam}},{key:"setPlatParam",value:function(e,t){if(""!==this.platform)if(Dn(e))for(var n in this.setInitPlatParam(e.device),e)tr[this.platform].indexOf(n)>-1&&(this.platParam[n]=e[n]);else t&&console.warn("设置平台字段参数不是object");else t&&console.warn("设置平台字段参数之前，请先设置平台。")}}]),e}();function rr(e,t,n){if(!Dn(e))return n&&console.warn("检测必填字段的数据不是object"),!1;for(var r=0;r<t.length;r++)if(void 0===e[t[r]])return n&&console.warn("必填字段",t,"缺少字段"+t[r]),!1;return!0}var ir={viewPage:{default:{atype:"view",stype:"page"},required:["page"],keys:["page","page_param","series","ignore","has_video"]},viewEl:{default:{atype:"view",stype:"element"},required:["page"],keys:["page","page_param","element","element_param","element_type","element_id","position_top","position_left","list","list_param","index","list2","list2_param","list2_index","list3","list3_param","list3_index","series","is_video","video_id"],ename:"element"},viewElDraw:{default:{atype:"view",stype:"element-draw"},required:["page"],keys:["page","page_param","element","element_param","element_type","element_id","position_top","position_left","list","list_param","index","list2","list2_param","list2_index","list3","list3_param","list3_index","series","is_video","video_id"],ename:"element"},actClick:{default:{atype:"act",stype:"click"},required:["page"],keys:["page","page_param","element","element_param","element_type","element_id","position_top","position_left","list","list_param","index","list2","list2_param","list2_index","list3","list3_param","list3_index","series","nav","nav_target","clk_type","times"],ename:"element"},actVideo:{default:{atype:"act",stype:"video"},required:["video_action"],keys:["page","page_param","video_name","video_id","video_param","video_action","video_position","duration","video_position_p","play_times","series"],ename:"video_action"},actScroll:{default:{atype:"act",stype:"scroll"},required:["page"],keys:["page","page_param","scroll_top","scroll_left","scroll_top_p","scroll_left_p","page_height","page_width","scroll_top_max","scroll_left_max","scroll_top_max_p","scroll_left_max_p","direction","series"]},actEvent:{default:{atype:"act",stype:"event"},required:["act_type"],keys:["page","page_param","element","element_param","act_type","act_param","series"],ename:"act_type"},timingPage:{default:{atype:"timing",stype:"page"},required:["page_id","page","time_duration"],keys:["page_id","page","page_param","time_duration","time_all","time_piece","tick"]},timingVideo:{default:{atype:"timing",stype:"video"},required:["time_duration"],keys:["page","page_param","video_name","video_id","video_param","video_position","duration","video_position_p","play_times","time_duration","time_single","time_piece","tick"]}};function or(e){var t=e.baseParam,n=e.pt,r=e.ptInfo,i=e.isDebug,o={setconfig:1,common:ne(ne({},t),{},{platform:n,ptInfo:r})};return i&&(console.log("logConfig"),console.log(o)),Tn(wn(o))}function ar(e,t,n,r){if("getconfig"===n)return r?{getconfig:Tn(wn(t.getconfig))}:Tn(wn(t));var i=e.baseParam,o=e.pt,a=e.ptInfo,u=e.isDebug;if(!n||!ir[n])return u&&console.warn("发送的type不对，当前type是"+n),"noType";if(!rr(t,ir[n].required,u))return u&&console.warn("发送"+n+"类型的必填信息不全"),"noRequired";var c=wn(t),l={},s={},f={},p={},d={},h={},g={};c.ruleId&&(g.rule_id=c.ruleId,delete c.ruleId);var v={};for(var m in c)ir[n].keys.indexOf(m)>-1?(l[m]=c[m],delete c[m]):"ext"===m?(s=c[m],delete c[m]):0===m.indexOf("f_")?(f[m]=c[m],delete c[m]):0===m.indexOf("c_")?(p[m]=c[m],delete c[m]):On.indexOf(m)>-1?(d[m]=c[m],delete c[m]):tr[o].indexOf(m)>-1?(h[m]=c[m],delete c[m]):(v[m]=c[m],delete c[m]);if(ir[n].ename&&(l.ename=l[ir[n].ename]),r){var y=ne({setconfig:0,common:ne(ne(ne({},i),{},{timestamp:(new Date).getTime()},d),{},{platform:o,ptInfo:ne(ne({},a),h)}),action:ne(ne({},ir[n].default),{},{actionInfo:l,ext:s,commonExt:f,customExt:p,customUser:v})},g);return u&&(console.log("logHttp"),console.log(y)),Tn(wn(y))}var b=ne({setconfig:0,common:ne(ne({timestamp:(new Date).getTime()},d),{},{ptInfo:h}),action:ne(ne({},ir[n].default),{},{actionInfo:l,ext:s,commonExt:f,customExt:p,customUser:v})},g);return u&&(console.log("logWebsocket"),console.log(b)),Tn(wn(b))}var ur=function(){function e(){Q(this,e),this.globalParam={debug:!1,http:{url:"https://cstm.baidu.com/log/common/v.gif"},websocket:{url:"wss://cstm.baidu.com/log/index",reconnectInterval:2e3,heartInterval:3e3,binaryType:"blob"}}}return Z(e,[{key:"getGlobalParam",value:function(){return this.globalParam}},{key:"setGlobalParam",value:function(e,t){if(Dn(e)){for(var n in e)if(void 0!==this.globalParam[n])if(Dn(this.globalParam[n])&&Dn(e[n]))for(var r in e[n])this.globalParam[n][r]?this.globalParam[n][r]=e[n][r]:t&&console.warn("设置全局参数中，"+n+"中的"+r+"不是全局参数");else this.globalParam[n]=e[n]}else t&&console.warn("设置全局参数不是object")}}]),e}();var cr=[].sort,lr=[1,2,3];T(T.P+T.F*(n((function(){lr.sort(void 0)}))||!n((function(){lr.sort(null)}))||!U(cr)),"Array",{sort:function(e){return void 0===e?cr.call(R(this)):cr.call(R(this),C(e))}});var sr=V(5),fr="find",pr=!0;fr in[]&&Array(1).find((function(){pr=!1})),T(T.P+T.F*pr,"Array",{find:function(e){return sr(this,e,arguments.length>1?arguments[1]:void 0)}}),Mt(fr);var dr=V(2);T(T.P+T.F*!U([].filter,!0),"Array",{filter:function(e){return dr(this,e,arguments[1])}});var hr=Math.max,gr=Math.min,vr=Math.floor,mr=/\$([$&`']|\d\d?|<[^>]*>)/g,yr=/\$([$&`']|\d\d?)/g;Kn("replace",2,(function(e,n,r,i){return[function(t,i){var o=e(this),a=null==t?void 0:t[n];return void 0!==a?a.call(t,o,i):r.call(String(o),t,i)},function(e,n){var a=i(r,e,this,n);if(a.done)return a.value;var u=t(e),c=String(this),l="function"==typeof n;l||(n=String(n));var s=u.global;if(s){var f=u.unicode;u.lastIndex=0}for(var p=[];;){var d=qn(u,c);if(null===d)break;if(p.push(d),!s)break;""===String(d[0])&&(u.lastIndex=Mn(c,B(u.lastIndex),f))}for(var h,g="",v=0,m=0;m<p.length;m++){d=p[m];for(var y=String(d[0]),b=hr(gr(q(d.index),c.length),0),w=[],_=1;_<d.length;_++)w.push(void 0===(h=d[_])?h:String(h));var x=d.groups;if(l){var k=[y].concat(w,b,c);void 0!==x&&k.push(x);var S=String(n.apply(void 0,k))}else S=o(y,c,b,w,x,n);b>=v&&(g+=c.slice(v,b)+S,v=b+y.length)}return g+c.slice(v)}];function o(e,t,n,i,o,a){var u=n+e.length,c=i.length,l=yr;return void 0!==o&&(o=R(o),l=mr),r.call(a,l,(function(r,a){var l;switch(a.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(u);case"<":l=o[a.slice(1,-1)];break;default:var s=+a;if(0===s)return r;if(s>c){var f=vr(s/10);return 0===f?r:f<=c?void 0===i[f-1]?a.charAt(1):i[f-1]+a.charAt(1):r}l=i[s-1]}return void 0===l?"":l}))}}));var br={f:{}.propertyIsEnumerable},wr=Object.getOwnPropertyDescriptor,_r={f:r?wr:function(e,t){if(e=_t(e),t=s(t,!0),l)try{return wr(e,t)}catch(e){}if(_(e,t))return y(!br.f.call(e,t),e[t])}},xr=function(n,r){if(t(n),!e(r)&&null!==r)throw TypeError(r+": can't set as prototype!")},kr={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{(n=A(Function.call,_r.f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,r){return xr(e,r),t?e.__proto__=r:n(e,r),e}}({},!1):void 0),check:xr}.set,Sr=Ht.concat("length","prototype"),Er={f:Object.getOwnPropertyNames||function(e){return $t(e,Sr)}},Pr=p.f,Ir=Er.f,Cr=o.RegExp,Ar=Cr,Dr=Cr.prototype,Tr=/a/g,Or=/a/g,Nr=new Cr(Tr)!==Tr;if(r&&(!Nr||n((function(){return Or[$("match")]=!1,Cr(Tr)!=Tr||Cr(Or)==Or||"/a/i"!=Cr(Tr,"i")})))){Cr=function(t,n){var r,i,o,a,u=this instanceof Cr,c=jn(t),l=void 0===n;return!u&&c&&t.constructor===Cr&&l?t:(r=Nr?new Ar(c&&!l?t.source:t,n):Ar((c=t instanceof Cr)?t.source:t,c&&l?_n.call(t):n),i=Cr,(a=(u?this:Dr).constructor)!==i&&"function"==typeof a&&(o=a.prototype)!==i.prototype&&e(o)&&kr&&kr(r,o),r)};for(var Lr=function(e){e in Cr||Pr(Cr,e,{configurable:!0,get:function(){return Ar[e]},set:function(t){Ar[e]=t}})},jr=Ir(Ar),Rr=0;jr.length>Rr;)Lr(jr[Rr++]);Dr.constructor=Cr,Cr.prototype=Dr,I(o,"RegExp",Cr)}Ue("RegExp");var Mr=i((function(e){
/*! Sizzle v2.3.5 | (c) JS Foundation and other contributors | js.foundation */
!function(t){var n,r,i,o,a,u,c,l,s,f,p,d,h,g,v,m,y,b,w,_="sizzle"+1*new Date,x=t.document,k=0,S=0,E=le(),P=le(),I=le(),C=le(),A=function(e,t){return e===t&&(p=!0),0},D={}.hasOwnProperty,T=[],O=T.pop,N=T.push,L=T.push,j=T.slice,R=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},M="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",W="[\\x20\\t\\r\\n\\f]",q="(?:\\\\[\\da-fA-F]{1,6}"+W+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",F="\\["+W+"*("+q+")(?:"+W+"*([*^$|!~]?=)"+W+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+q+"))|)"+W+"*\\]",B=":("+q+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+F+")*)|.*)\\)|)",G=new RegExp(W+"+","g"),$=new RegExp("^"+W+"+|((?:^|[^\\\\])(?:\\\\.)*)"+W+"+$","g"),H=new RegExp("^"+W+"*,"+W+"*"),z=new RegExp("^"+W+"*([>+~]|"+W+")"+W+"*"),V=new RegExp(W+"|>"),U=new RegExp(B),J=new RegExp("^"+q+"$"),K={ID:new RegExp("^#("+q+")"),CLASS:new RegExp("^\\.("+q+")"),TAG:new RegExp("^("+q+"|[*])"),ATTR:new RegExp("^"+F),PSEUDO:new RegExp("^"+B),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+W+"*(even|odd|(([+-]|)(\\d*)n|)"+W+"*(?:([+-]|)"+W+"*(\\d+)|))"+W+"*\\)|)","i"),bool:new RegExp("^(?:"+M+")$","i"),needsContext:new RegExp("^"+W+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+W+"*((?:-\\d)?\\d*)"+W+"*\\)|)(?=[^-]|$)","i")},X=/HTML$/i,Q=/^(?:input|select|textarea|button)$/i,Y=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,ee=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,te=/[+~]/,ne=new RegExp("\\\\[\\da-fA-F]{1,6}"+W+"?|\\\\([^\\r\\n\\f])","g"),re=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},ie=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,oe=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ae=function(){d()},ue=be((function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{L.apply(T=j.call(x.childNodes),x.childNodes),T[x.childNodes.length].nodeType}catch(t){L={apply:T.length?function(e,t){N.apply(e,j.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function ce(e,t,n,i){var o,a,c,s,f,p,g,y=t&&t.ownerDocument,b=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==b&&9!==b&&11!==b)return n;if(!i&&(d(t),t=t||h,v)){if(11!==b&&(f=ee.exec(e)))if(o=f[1]){if(9===b){if(!(c=t.getElementById(o)))return n;if(c.id===o)return n.push(c),n}else if(y&&(c=y.getElementById(o))&&w(t,c)&&c.id===o)return n.push(c),n}else{if(f[2])return L.apply(n,t.getElementsByTagName(e)),n;if((o=f[3])&&r.getElementsByClassName&&t.getElementsByClassName)return L.apply(n,t.getElementsByClassName(o)),n}if(r.qsa&&!C[e+" "]&&(!m||!m.test(e))&&(1!==b||"object"!==t.nodeName.toLowerCase())){if(g=e,y=t,1===b&&(V.test(e)||z.test(e))){for((y=te.test(e)&&ve(t.parentNode)||t)===t&&r.scope||((s=t.getAttribute("id"))?s=s.replace(ie,oe):t.setAttribute("id",s=_)),a=(p=u(e)).length;a--;)p[a]=(s?"#"+s:":scope")+" "+ye(p[a]);g=p.join(",")}try{return L.apply(n,y.querySelectorAll(g)),n}catch(t){C(e,!0)}finally{s===_&&t.removeAttribute("id")}}}return l(e.replace($,"$1"),t,n,i)}function le(){var e=[];return function t(n,r){return e.push(n+" ")>i.cacheLength&&delete t[e.shift()],t[n+" "]=r}}function se(e){return e[_]=!0,e}function fe(e){var t=h.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function pe(e,t){for(var n=e.split("|"),r=n.length;r--;)i.attrHandle[n[r]]=t}function de(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function he(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ue(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function ge(e){return se((function(t){return t=+t,se((function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))}))}))}function ve(e){return e&&void 0!==e.getElementsByTagName&&e}for(n in r=ce.support={},a=ce.isXML=function(e){var t=e.namespaceURI,n=(e.ownerDocument||e).documentElement;return!X.test(t||n&&n.nodeName||"HTML")},d=ce.setDocument=function(e){var t,n,o=e?e.ownerDocument||e:x;return o!=h&&9===o.nodeType&&o.documentElement?(g=(h=o).documentElement,v=!a(h),x!=h&&(n=h.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",ae,!1):n.attachEvent&&n.attachEvent("onunload",ae)),r.scope=fe((function(e){return g.appendChild(e).appendChild(h.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length})),r.attributes=fe((function(e){return e.className="i",!e.getAttribute("className")})),r.getElementsByTagName=fe((function(e){return e.appendChild(h.createComment("")),!e.getElementsByTagName("*").length})),r.getElementsByClassName=Z.test(h.getElementsByClassName),r.getById=fe((function(e){return g.appendChild(e).id=_,!h.getElementsByName||!h.getElementsByName(_).length})),r.getById?(i.filter.ID=function(e){var t=e.replace(ne,re);return function(e){return e.getAttribute("id")===t}},i.find.ID=function(e,t){if(void 0!==t.getElementById&&v){var n=t.getElementById(e);return n?[n]:[]}}):(i.filter.ID=function(e){var t=e.replace(ne,re);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},i.find.ID=function(e,t){if(void 0!==t.getElementById&&v){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];for(i=t.getElementsByName(e),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),i.find.TAG=r.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):r.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},i.find.CLASS=r.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&v)return t.getElementsByClassName(e)},y=[],m=[],(r.qsa=Z.test(h.querySelectorAll))&&(fe((function(e){var t;g.appendChild(e).innerHTML="<a id='"+_+"'></a><select id='"+_+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+W+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+W+"*(?:value|"+M+")"),e.querySelectorAll("[id~="+_+"-]").length||m.push("~="),(t=h.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||m.push("\\["+W+"*name"+W+"*="+W+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+_+"+*").length||m.push(".#.+[+~]"),e.querySelectorAll("\\\f"),m.push("[\\r\\n\\f]")})),fe((function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=h.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+W+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),g.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")}))),(r.matchesSelector=Z.test(b=g.matches||g.webkitMatchesSelector||g.mozMatchesSelector||g.oMatchesSelector||g.msMatchesSelector))&&fe((function(e){r.disconnectedMatch=b.call(e,"*"),b.call(e,"[s!='']:x"),y.push("!=",B)})),m=m.length&&new RegExp(m.join("|")),y=y.length&&new RegExp(y.join("|")),t=Z.test(g.compareDocumentPosition),w=t||Z.test(g.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},A=t?function(e,t){if(e===t)return p=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!r.sortDetached&&t.compareDocumentPosition(e)===n?e==h||e.ownerDocument==x&&w(x,e)?-1:t==h||t.ownerDocument==x&&w(x,t)?1:f?R(f,e)-R(f,t):0:4&n?-1:1)}:function(e,t){if(e===t)return p=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],u=[t];if(!i||!o)return e==h?-1:t==h?1:i?-1:o?1:f?R(f,e)-R(f,t):0;if(i===o)return de(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)u.unshift(n);for(;a[r]===u[r];)r++;return r?de(a[r],u[r]):a[r]==x?-1:u[r]==x?1:0},h):h},ce.matches=function(e,t){return ce(e,null,null,t)},ce.matchesSelector=function(e,t){if(d(e),r.matchesSelector&&v&&!C[t+" "]&&(!y||!y.test(t))&&(!m||!m.test(t)))try{var n=b.call(e,t);if(n||r.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){C(t,!0)}return ce(t,h,null,[e]).length>0},ce.contains=function(e,t){return(e.ownerDocument||e)!=h&&d(e),w(e,t)},ce.attr=function(e,t){(e.ownerDocument||e)!=h&&d(e);var n=i.attrHandle[t.toLowerCase()],o=n&&D.call(i.attrHandle,t.toLowerCase())?n(e,t,!v):void 0;return void 0!==o?o:r.attributes||!v?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},ce.escape=function(e){return(e+"").replace(ie,oe)},ce.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ce.uniqueSort=function(e){var t,n=[],i=0,o=0;if(p=!r.detectDuplicates,f=!r.sortStable&&e.slice(0),e.sort(A),p){for(;t=e[o++];)t===e[o]&&(i=n.push(o));for(;i--;)e.splice(n[i],1)}return f=null,e},o=ce.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=o(t);return n},(i=ce.selectors={cacheLength:50,createPseudo:se,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ne,re),e[3]=(e[3]||e[4]||e[5]||"").replace(ne,re),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ce.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ce.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return K.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&U.test(n)&&(t=u(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ne,re).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=E[e+" "];return t||(t=new RegExp("(^|"+W+")"+e+"("+W+"|$)"))&&E(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(r){var i=ce.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace(G," ")+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),u="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,c){var l,s,f,p,d,h,g=o!==a?"nextSibling":"previousSibling",v=t.parentNode,m=u&&t.nodeName.toLowerCase(),y=!c&&!u,b=!1;if(v){if(o){for(;g;){for(p=t;p=p[g];)if(u?p.nodeName.toLowerCase()===m:1===p.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?v.firstChild:v.lastChild],a&&y){for(b=(d=(l=(s=(f=(p=v)[_]||(p[_]={}))[p.uniqueID]||(f[p.uniqueID]={}))[e]||[])[0]===k&&l[1])&&l[2],p=d&&v.childNodes[d];p=++d&&p&&p[g]||(b=d=0)||h.pop();)if(1===p.nodeType&&++b&&p===t){s[e]=[k,d,b];break}}else if(y&&(b=d=(l=(s=(f=(p=t)[_]||(p[_]={}))[p.uniqueID]||(f[p.uniqueID]={}))[e]||[])[0]===k&&l[1]),!1===b)for(;(p=++d&&p&&p[g]||(b=d=0)||h.pop())&&((u?p.nodeName.toLowerCase()!==m:1!==p.nodeType)||!++b||(y&&((s=(f=p[_]||(p[_]={}))[p.uniqueID]||(f[p.uniqueID]={}))[e]=[k,b]),p!==t)););return(b-=i)===r||b%r==0&&b/r>=0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||ce.error("unsupported pseudo: "+e);return r[_]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?se((function(e,n){for(var i,o=r(e,t),a=o.length;a--;)e[i=R(e,o[a])]=!(n[i]=o[a])})):function(e){return r(e,0,n)}):r}},pseudos:{not:se((function(e){var t=[],n=[],r=c(e.replace($,"$1"));return r[_]?se((function(e,t,n,i){for(var o,a=r(e,null,i,[]),u=e.length;u--;)(o=a[u])&&(e[u]=!(t[u]=o))})):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}})),has:se((function(e){return function(t){return ce(e,t).length>0}})),contains:se((function(e){return e=e.replace(ne,re),function(t){return(t.textContent||o(t)).indexOf(e)>-1}})),lang:se((function(e){return J.test(e||"")||ce.error("unsupported lang: "+e),e=e.replace(ne,re).toLowerCase(),function(t){var n;do{if(n=v?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(e){return e===g},focus:function(e){return e===h.activeElement&&(!h.hasFocus||h.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:he(!1),disabled:he(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return Y.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ge((function(){return[0]})),last:ge((function(e,t){return[t-1]})),eq:ge((function(e,t,n){return[n<0?n+t:n]})),even:ge((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:ge((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:ge((function(e,t,n){for(var r=n<0?n+t:n>t?t:n;--r>=0;)e.push(r);return e})),gt:ge((function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e}))}}).pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[n]=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}(n);for(n in{submit:!0,reset:!0})i.pseudos[n]=function(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}(n);function me(){}function ye(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function be(e,t,n){var r=t.dir,i=t.next,o=i||r,a=n&&"parentNode"===o,u=S++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||a)return e(t,n,i);return!1}:function(t,n,c){var l,s,f,p=[k,u];if(c){for(;t=t[r];)if((1===t.nodeType||a)&&e(t,n,c))return!0}else for(;t=t[r];)if(1===t.nodeType||a)if(s=(f=t[_]||(t[_]={}))[t.uniqueID]||(f[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[r]||t;else{if((l=s[o])&&l[0]===k&&l[1]===u)return p[2]=l[2];if(s[o]=p,p[2]=e(t,n,c))return!0}return!1}}function we(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function _e(e,t,n,r,i){for(var o,a=[],u=0,c=e.length,l=null!=t;u<c;u++)(o=e[u])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(u)));return a}function xe(e,t,n,r,i,o){return r&&!r[_]&&(r=xe(r)),i&&!i[_]&&(i=xe(i,o)),se((function(o,a,u,c){var l,s,f,p=[],d=[],h=a.length,g=o||function(e,t,n){for(var r=0,i=t.length;r<i;r++)ce(e,t[r],n);return n}(t||"*",u.nodeType?[u]:u,[]),v=!e||!o&&t?g:_e(g,p,e,u,c),m=n?i||(o?e:h||r)?[]:a:v;if(n&&n(v,m,u,c),r)for(l=_e(m,d),r(l,[],u,c),s=l.length;s--;)(f=l[s])&&(m[d[s]]=!(v[d[s]]=f));if(o){if(i||e){if(i){for(l=[],s=m.length;s--;)(f=m[s])&&l.push(v[s]=f);i(null,m=[],l,c)}for(s=m.length;s--;)(f=m[s])&&(l=i?R(o,f):p[s])>-1&&(o[l]=!(a[l]=f))}}else m=_e(m===a?m.splice(h,m.length):m),i?i(null,a,m,c):L.apply(a,m)}))}function ke(e){for(var t,n,r,o=e.length,a=i.relative[e[0].type],u=a||i.relative[" "],c=a?1:0,l=be((function(e){return e===t}),u,!0),f=be((function(e){return R(t,e)>-1}),u,!0),p=[function(e,n,r){var i=!a&&(r||n!==s)||((t=n).nodeType?l(e,n,r):f(e,n,r));return t=null,i}];c<o;c++)if(n=i.relative[e[c].type])p=[be(we(p),n)];else{if((n=i.filter[e[c].type].apply(null,e[c].matches))[_]){for(r=++c;r<o&&!i.relative[e[r].type];r++);return xe(c>1&&we(p),c>1&&ye(e.slice(0,c-1).concat({value:" "===e[c-2].type?"*":""})).replace($,"$1"),n,c<r&&ke(e.slice(c,r)),r<o&&ke(e=e.slice(r)),r<o&&ye(e))}p.push(n)}return we(p)}function Se(e,t){var n=t.length>0,r=e.length>0,o=function(o,a,u,c,l){var f,p,g,m=0,y="0",b=o&&[],w=[],_=s,x=o||r&&i.find.TAG("*",l),S=k+=null==_?1:Math.random()||.1,E=x.length;for(l&&(s=a==h||a||l);y!==E&&null!=(f=x[y]);y++){if(r&&f){for(p=0,a||f.ownerDocument==h||(d(f),u=!v);g=e[p++];)if(g(f,a||h,u)){c.push(f);break}l&&(k=S)}n&&((f=!g&&f)&&m--,o&&b.push(f))}if(m+=y,n&&y!==m){for(p=0;g=t[p++];)g(b,w,a,u);if(o){if(m>0)for(;y--;)b[y]||w[y]||(w[y]=O.call(c));w=_e(w)}L.apply(c,w),l&&!o&&w.length>0&&m+t.length>1&&ce.uniqueSort(c)}return l&&(k=S,s=_),b};return n?se(o):o}me.prototype=i.filters=i.pseudos,i.setFilters=new me,u=ce.tokenize=function(e,t){var n,r,o,a,u,c,l,s=P[e+" "];if(s)return t?0:s.slice(0);for(u=e,c=[],l=i.preFilter;u;){for(a in n&&!(r=H.exec(u))||(r&&(u=u.slice(r[0].length)||u),c.push(o=[])),n=!1,(r=z.exec(u))&&(n=r.shift(),o.push({value:n,type:r[0].replace($," ")}),u=u.slice(n.length)),i.filter)!(r=K[a].exec(u))||l[a]&&!(r=l[a](r))||(n=r.shift(),o.push({value:n,type:a,matches:r}),u=u.slice(n.length));if(!n)break}return t?u.length:u?ce.error(e):P(e,c).slice(0)},c=ce.compile=function(e,t){var n,r=[],i=[],o=I[e+" "];if(!o){for(t||(t=u(e)),n=t.length;n--;)(o=ke(t[n]))[_]?r.push(o):i.push(o);(o=I(e,Se(i,r))).selector=e}return o},l=ce.select=function(e,t,n,r){var o,a,l,s,f,p="function"==typeof e&&e,d=!r&&u(e=p.selector||e);if(n=n||[],1===d.length){if((a=d[0]=d[0].slice(0)).length>2&&"ID"===(l=a[0]).type&&9===t.nodeType&&v&&i.relative[a[1].type]){if(!(t=(i.find.ID(l.matches[0].replace(ne,re),t)||[])[0]))return n;p&&(t=t.parentNode),e=e.slice(a.shift().value.length)}for(o=K.needsContext.test(e)?0:a.length;o--&&(l=a[o],!i.relative[s=l.type]);)if((f=i.find[s])&&(r=f(l.matches[0].replace(ne,re),te.test(a[0].type)&&ve(t.parentNode)||t))){if(a.splice(o,1),!(e=r.length&&ye(a)))return L.apply(n,r),n;break}}return(p||c(e,d))(r,t,!v,n,!t||te.test(e)&&ve(t.parentNode)||t),n},r.sortStable=_.split("").sort(A).join("")===_,r.detectDuplicates=!!p,d(),r.sortDetached=fe((function(e){return 1&e.compareDocumentPosition(h.createElement("fieldset"))})),fe((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||pe("type|href|height|width",(function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),r.attributes&&fe((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||pe("value",(function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),fe((function(e){return null==e.getAttribute("disabled")}))||pe(M,(function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}));var Ee=t.Sizzle;ce.noConflict=function(){return t.Sizzle===ce&&(t.Sizzle=Ee),ce},e.exports?e.exports=ce:t.Sizzle=ce}(window)}));function Wr(e){return!!e&&"object"===X(e)&&1===e.nodeType}function qr(e,t){if(/^\d+%$/.test(e)){var n=parseInt(e,10)/100;e=Math.round(t*n)}else e=parseInt(e,10);return e}function Fr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=e.getBoundingClientRect(),i=r.top,o=r.bottom,a=r.height,u=r.left,c=r.right,l=r.width;if(0===l||0===a)return!1;var s=qr(t,a),f=qr(n,l),p=window.innerWidth||document.documentElement.clientWidth,d=window.innerHeight||document.documentElement.clientHeight,h=i>=0&&i+s<=d,g=o-s>=0&&o<=d,v=u>=0&&u+f<=p,m=c-f>=0&&c<=p,y=(h||g)&&(v||m);return y}T(T.S,"Date",{now:function(){return(new Date).getTime()}});var Br=new(function(){function e(t){Q(this,e),this.config=this._normalize(t),this._store=[],this._ticking=!1,this._lastTimestamp=Date.now(),this._throttledDetect=this._throttledDetect.bind(this)}return Z(e,[{key:"_normalize",value:function(e){return"object"!==X(e)&&(e={}),{interval:e.interval||0,offset:e.offset||0,offsetW:e.offsetW||0}}},{key:"_throttledDetect",value:function(e){var t=this,n=Date.now(),r=n-this._lastTimestamp;this._lastTimestamp=n,!this._ticking&&this._store.length&&r>=this.config.interval&&window.requestAnimationFrame((function(){t._detect(e),t._ticking=!1})),this._ticking=!0}},{key:"_detect",value:function(e){var t=this,n=this._store;Wr(e)&&(n=this._store.filter((function(t){return t.el.isSameNode(e)}))),n.forEach((function(e){Fr(e.el,t.config.offset,t.config.offsetW)&&e.callback()}))}},{key:"addListener",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};(e=[].concat(e)).forEach((function(e){Wr(e)&&(t._store.length||window.addEventListener("scroll",t._throttledDetect),t._store.push({el:e,callback:n}),t._throttledDetect(e))}))}},{key:"removeListener",value:function(e){var t=this;(e=[].concat(e)).forEach((function(e){Wr(e)&&(t._store=t._store.filter((function(t){return!t.el.isSameNode(e)})))})),this._store.length||window.removeEventListener("scroll",this._throttledDetect)}},{key:"removeAllListeners",value:function(){this._store=[],window.removeEventListener("scroll",this._throttledDetect)}}]),e}()),Gr=[],$r=!1;function Hr(e,t){var n=Mr(e.selector);if(0!==n.length){var r=n[0],i=e.ruleId,o=e.element,a=e.page,u=e.attribute,c={ruleId:i,element:o,page:a},l=u&&JSON.parse(u);if(l)for(var s in l){var f=r.getAttribute(s);null!==f&&(c[l[s]]=f)}Fr(r)?t(c,"viewEl"):Br.addListener(r,(function e(){Br.removeListener(r,e),t(c,"viewEl")}))}else Gr.push(e)}var zr=[],Vr=!1;function Ur(e,t){var n=Mr(e.selector);if(0!==n.length){var r=n[0],i=e.ruleId,o=e.element,a=e.page,u=e.attribute,c={ruleId:i,element:o,page:a},l=u&&JSON.parse(u);if(l)for(var s in l){var f=r.getAttribute(s);null!==f&&(c[l[s]]=f)}t(c,"viewElDraw")}else zr.push(e)}var Jr=V(1);T(T.P+T.F*!U([].map,!0),"Array",{map:function(e){return Jr(this,e,arguments[1])}});var Kr=[],Xr=!1;var Qr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Q(this,e),this.timer=null,this.interval=t.interval||3e3,this.onLog=t.onLog||function(){}}return Z(e,[{key:"start",value:function(){var e=this;if(!this.timer){var t=Date.now(),n="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}));this.timer=setInterval((function(){var r=Date.now()-t;e.onLog({pageId:n,duration:r})}),this.interval)}}},{key:"stop",value:function(){this.timer&&(clearInterval(this.timer),this.timer=null)}}]),e}();var Yr=["appname","platform","device"],Zr={viewpage:function(e,t){t({ruleId:e.ruleId,page:e.page},"viewPage")},viewelement:function(e,t){Hr(e,t),$r||($r=!0,document.addEventListener("DOMNodeInserted",(function(){var e=Gr.length;Gr.forEach((function(e){Hr(e,t)})),Gr.splice(0,e)})))},"viewelement-draw":function(e,t){Ur(e,t),Vr||(Vr=!0,document.addEventListener("DOMNodeInserted",(function(){var e=zr.length;zr.forEach((function(e){Ur(e,t)})),zr.splice(0,e)})))},actclick:function(e,t){Kr.push(e),Xr||(document.onclick=function(e){Xr=!0;var n=(e=e||window.event).target||e.srcElement;Kr.forEach((function(e){var r=Mr(e.selector),i=e.selector.split(",").map((function(e){return e+" *"})).join(","),o=Mr(i);if(r.indexOf(n)>-1||o.indexOf(n)>-1){var a=e.ruleId,u=e.element,c=e.page,l=e.attribute,s={ruleId:a,element:u,page:c},f=l&&JSON.parse(l);if(f)for(var p in f){var d=n.getAttribute(p);null!==d&&(s[f[p]]=d)}t(s,"actClick")}}))})},timingpage:function(e,t){var n=e.ruleId,r=e.page,i=new Qr({onLog:function(e){t({ruleId:n,page:r,page_id:e.pageId,time_duration:e.duration},"timingPage")}});i.start(),window.addEventListener("unload",(function(){return i.stop()}))}},ei=function(){function e(t){Q(this,e),this.globalParam=new ur,this.baseParam=new Nn,this.platParam=new nr,this.isWsInit=!1,this.isWsIniting=!1,this.noSendData=[],this.canSocket=!1,this.isWsSupport=!(!window.WebSocket||!window.WebSocket.prototype.send),this.webWocket=new Ot(this.globalParam.getGlobalParam()),this.resolveAuto=this.resolveAutoConfig.bind(this),this.autoLog=this.log.bind(this),this.init(t)}return Z(e,[{key:"isDebug",value:function(){var e=this.globalParam.getGlobalParam().debug;return window.location.href.indexOf("debug=1")>-1&&(e=!0),e}},{key:"init",value:function(e){void 0!==e&&(rr(e,Yr,this.isDebug())?(this.globalParam.setGlobalParam(e,this.isDebug()),this.baseParam.setBaseParam(e,this.isDebug()),this.platParam.setPlatform(e.platform,this.isDebug()),this.platParam.setPlatParam(e,this.isDebug()),this.isInit=!0,e.auto&&e.page&&this.getAutoConfig(e)):this.isDebug()&&console.warn("初始化必填参数不全"))}},{key:"getAutoConfig",value:function(e){var t={appname:e.appname,page:e.page,platform:e.platform,device:e.device};this.log({getconfig:t},"getconfig")}},{key:"resolveAutoConfig",value:function(e){var t=this;e&&Array.isArray(e)&&0!==e.length&&e.forEach((function(e){var n=e.atype+e.stype;Zr[n]&&Zr[n](e,t.autoLog)}))}},{key:"setConfig",value:function(e){this.globalParam.setGlobalParam(e,this.isDebug()),this.baseParam.setBaseParam(e,this.isDebug()),this.platParam.setPlatParam(e,this.isDebug()),this.logConfig()}},{key:"initWs",value:function(e){var t=this,n=this.isDebug();return new Promise((function(r,i){t.isWsIniting=!0,t.webWocket.initWebsocket(e,(function(){o.canSocket=!0,r()}),(function(){o.canSocket=!1,i()}),t.resolveAuto,n);var o=t}))}},{key:"log",value:function(e,t){var n=this;if(this.isInit)if(Dn(e)){var r=this.baseParam.getBaseParam(),i=this.platParam.getPlatform(),o=this.platParam.getPlatParam(),a=this.isDebug(),u={baseParam:r,pt:i,ptInfo:o,isDebug:a},c=this.globalParam.getGlobalParam().http.url;this.isWsSupport?this.isWsInit||this.isWsIniting?this.isWsIniting?this.noSendData.push({data:e,type:t}):this.canSocket?this.webWocket.logWebsocket(ar(u,e,t),a):Lt(ar(u,e,t,!0),c,this.resolveAuto):this.initWs(or(u)).then((function(){n.isWsInit=!0,n.isWsIniting=!1,n.webWocket.logWebsocket(ar(u,e,t),a),n.noSendData.length>0&&(n.noSendData.forEach((function(e){n.webWocket.logWebsocket(ar(u,e.data,e.type),a)})),n.noSendData=[])})).catch((function(){n.isWsInit=!0,n.isWsIniting=!1,Lt(ar(e,t,!0),c,n.resolveAuto),n.noSendData.length>0&&(n.noSendData.forEach((function(e){Lt(ar(u,e.data,e.type,!0),c,n.resolveAuto)})),n.noSendData=[])})):Lt(ar(u,e,t,!0),c,this.resolveAuto)}else this.isDebug()&&console.warn("传入打点参数不是object");else this.isDebug()&&console.warn("发送具体打点之前，请先初始化")}},{key:"logConfig",value:function(){if(this.isWsSupport&&this.isWsInit&&this.canSocket){var e=this.baseParam.getBaseParam(),t=this.platParam.getPlatform(),n=this.platParam.getPlatParam(),r=this.isDebug(),i={baseParam:e,pt:t,ptInfo:n,isDebug:r};this.webWocket.logWsConfig(or(i),r)}}}]),e}(),ti=function(){function e(t){Q(this,e),this.log=new ei(t),this.logGlobalParam={}}return Z(e,[{key:"init",value:function(e){this.log.init(e)}},{key:"setConfig",value:function(e){this.log.setConfig(e)}},{key:"setLogGlobalParam",value:function(e){this.logGlobalParam=e}},{key:"logEntry",value:function(e,t){this.log.log(ne(ne({},this.logGlobalParam),e),t)}},{key:"logViewPage",value:function(e){this.logEntry(e,"viewPage")}},{key:"logViewEl",value:function(e){this.logEntry(e,"viewEl")}},{key:"logViewElDraw",value:function(e){this.logEntry(e,"viewElDraw")}},{key:"logActClick",value:function(e){this.logEntry(e,"actClick")}},{key:"logActVideo",value:function(e){this.logEntry(e,"actVideo")}},{key:"logActScroll",value:function(e){this.logEntry(e,"actScroll")}},{key:"logActEvent",value:function(e){this.logEntry(e,"actEvent")}},{key:"logTimingPage",value:function(e){this.logEntry(e,"timingPage")}},{key:"logTimingVideo",value:function(e){this.logEntry(e,"timingVideo")}}]),e}(),ni=(new ti,new ti),ri=window.clickstream;return ri.init&&ni.init(ri.init),ri.config&&ni.setConfig(ri.config),ri.logGlobalParam&&ni.setLogGlobalParam(ri.logGlobalParam),ri.data&&ri.data.length>0&&ri.data.forEach((function(e){ni[e.callee.name](e[0])})),ni}));
